(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{lu3c:function(e,t,a){"use strict";a.r(t),a.d(t,"LoginModule",(function(){return C}));var n=a("ofXK"),i=a("tyNb"),r=a("mrSG"),o=a("3Pt+"),s=a("fXoL"),c=a("N/25"),m=a("I/3d"),l=a("dNgK"),b=a("Wp6s"),d=a("kmnG"),u=a("qFsG"),p=a("bTqV"),h=a("NFeN");const g=function(){return["/register"]},f=function(){return["/forgot-password"]},S=[{path:"",component:(()=>{class e{constructor(e,t,a,n){this.authSvc=e,this.afs=t,this.router=a,this._snackBar=n,this.loginForm=new o.g({email:new o.d("",[o.s.email,o.s.required]),password:new o.d("",[o.s.required,o.s.minLength(6)])}),this.hide=!0}ngOnInit(){}openSnackBar(e){this._snackBar.open(e,"OK",{duration:5e3})}onLogin(){return Object(r.a)(this,void 0,void 0,(function*(){const{email:e,password:t}=this.loginForm.value;try{const a=yield this.authSvc.login(e,t);a&&(this.checkUserIsVerified(a),this.valideUserSmash(a.uid,e,a.emailVerified))}catch(a){this.openSnackBar("Correo o contrase\xf1a incorrecta")}}))}checkUserIsVerified(e){e&&e.emailVerified?this.router.navigate(["/home"]):e?(this.authSvc.logout(),this.router.navigate(["/verification-email"])):this.router.navigate(["/register"])}valideUserSmash(e,t,a){return Object(r.a)(this,void 0,void 0,(function*(){let n;return n=yield this.afs.collection("users").doc(e).valueChanges().subscribe(n=>{if(null==n)try{return this.afs.doc("users/"+e).set({uid:e,email:t,emailVerified:a,role:"SUSCRIPTOR",displayName:null,tagName:null,rnkPoints:0,main:null,secondary:null,switchCode:null,position:""},{merge:!0})}catch(i){console.log("ERROR: ",i)}else sessionStorage.setItem("USERDISPLAYNAME",n.displayName),sessionStorage.setItem("USEREMAIL",n.email),sessionStorage.setItem("USERMAIN",n.main),sessionStorage.setItem("USERSECONDARY",n.secondary),sessionStorage.setItem("USERSWITCHCODE",n.switchCode),sessionStorage.setItem("USERTAGNAME",n.tagName),sessionStorage.setItem("USERUID",n.uid),sessionStorage.setItem("RNKPOINTS",n.rnkPoints)}),n}))}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(c.a),s.Mb(m.a),s.Mb(i.b),s.Mb(l.a))},e.\u0275cmp=s.Gb({type:e,selectors:[["app-login"]],decls:32,vars:9,consts:[[1,"example-card"],[1,"tp-container"],[1,"card-avatar","example-header-image","m-5a"],[1,"tac"],[3,"formGroup","ngSubmit"],["appearance","outline",1,"form-group","w-100"],["matInput","","type","email","formControlName","email","placeholder","EMAIL","autocomplete","off","minlength","6",1,"form-control"],["input",""],["appearance","outline","hintLabel","Min 6 characters",1,"form-group","w-100"],["matInput","","type","password","formControlName","password","placeholder","PASSWORD","autocomplete","off",1,"form-control",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],["type","submit","mat-flat-button","","color","primary",1,"w-100","mt-30"],[1,"form-group","mt-40","tac"],[3,"routerLink"],[1,"form-group","mt-3"]],template:function(e,t){1&e&&(s.Sb(0,"mat-card",0),s.Nb(1,"mat-card-header"),s.Sb(2,"mat-card-content"),s.Sb(3,"div",1),s.Nb(4,"div",2),s.Sb(5,"h1",3),s.Cc(6,"LOGIN"),s.Rb(),s.Sb(7,"form",4),s.Zb("ngSubmit",(function(){return t.onLogin()})),s.Sb(8,"mat-form-field",5),s.Sb(9,"mat-label"),s.Cc(10,"Email"),s.Rb(),s.Nb(11,"input",6,7),s.Rb(),s.Sb(13,"mat-form-field",8),s.Sb(14,"mat-label"),s.Cc(15,"Password"),s.Rb(),s.Nb(16,"input",9),s.Sb(17,"button",10),s.Zb("click",(function(){return t.hide=!t.hide})),s.Sb(18,"mat-icon"),s.Cc(19),s.Rb(),s.Rb(),s.Rb(),s.Sb(20,"button",11),s.Cc(21,"Iniciar Sesi\xf3n"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(22,"div",12),s.Sb(23,"p"),s.Cc(24,"Crear una cuenta "),s.Sb(25,"a",13),s.Cc(26," Registrarse"),s.Rb(),s.Rb(),s.Rb(),s.Sb(27,"div",14),s.Sb(28,"p"),s.Cc(29,"Olvidaste tu contrase\xf1a? "),s.Sb(30,"a",13),s.Cc(31," Olvide Contrase\xf1a"),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&e&&(s.Bb(7),s.ic("formGroup",t.loginForm),s.Bb(9),s.ic("type",t.hide?"password":"text"),s.Bb(1),s.Cb("aria-label","Hide password")("aria-pressed",t.hide),s.Bb(2),s.Dc(t.hide?"visibility_off":"visibility"),s.Bb(6),s.ic("routerLink",s.mc(7,g)),s.Bb(5),s.ic("routerLink",s.mc(8,f)))},directives:[b.a,b.c,b.b,o.t,o.o,o.h,d.b,d.e,u.a,o.b,o.n,o.f,o.j,p.a,d.f,h.a,i.c],styles:["@media only screen and (max-width:425px){.example-card[_ngcontent-%COMP%]{max-width:400px;margin:0 auto}.w-100[_ngcontent-%COMP%]{width:100%}.w-95[_ngcontent-%COMP%]{width:95%}.tac[_ngcontent-%COMP%]{text-align:center}.mt-40[_ngcontent-%COMP%]{margin-top:40px}.mt-30[_ngcontent-%COMP%]{margin-top:30px}.example-header-image[_ngcontent-%COMP%]{background-image:url(whatsapp.f93716c1baa64ab4c483.png);background-size:cover}.m-5a[_ngcontent-%COMP%]{margin:5px auto}.card-avatar[_ngcontent-%COMP%]{height:200px;width:68%;border-radius:50%;flex-shrink:0;object-fit:cover}}"]}),e})()}];let R=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},imports:[[i.d.forChild(S)],i.d]}),e})();var w=a("d3UM");let C=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},imports:[[n.c,R,o.q,b.d,d.d,u.b,w.b,h.b,p.b]]}),e})()}}]);