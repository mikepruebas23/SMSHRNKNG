(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{lu3c:function(e,t,i){"use strict";i.r(t),i.d(t,"LoginModule",(function(){return C}));var a=i("ofXK"),n=i("tyNb"),o=i("mrSG"),r=i("3Pt+"),s=i("fXoL"),c=i("N/25"),m=i("I/3d"),l=i("dNgK"),b=i("Wp6s"),u=i("kmnG"),d=i("qFsG"),p=i("bTqV"),g=i("NFeN");const h=function(){return["/register"]},f=function(){return["/forgot-password"]},S=[{path:"",component:(()=>{class e{constructor(e,t,i,a){this.authSvc=e,this.afs=t,this.router=i,this._snackBar=a,this.loginForm=new r.g({email:new r.d("mikepruebas23@gmail.com",[r.s.email,r.s.required]),password:new r.d("mikegeko21",[r.s.required,r.s.minLength(6)])}),this.hide=!0}ngOnInit(){}openSnackBar(e){this._snackBar.open(e,"OK",{duration:5e3})}onLogin(){return Object(o.a)(this,void 0,void 0,(function*(){const{email:e,password:t}=this.loginForm.value;try{const i=yield this.authSvc.login(e,t);i&&(this.checkUserIsVerified(i),this.valideUserSmash(i.uid,e,i.emailVerified))}catch(i){this.openSnackBar("Correo o contrase\xf1a incorrecta")}}))}checkUserIsVerified(e){e&&e.emailVerified?this.router.navigate(["/home"]):e?(this.authSvc.logout(),this.router.navigate(["/verification-email"])):this.router.navigate(["/register"])}valideUserSmash(e,t,i){return Object(o.a)(this,void 0,void 0,(function*(){let a;return a=yield this.afs.collection("users").doc(e).valueChanges().subscribe(a=>{if(null==a)try{return this.afs.doc("users/"+e).set({uid:e,email:t,emailVerified:i,role:"SUSCRIPTOR",displayName:null,tagName:null,rnkPoints:0,main:null,secondary:null,switchCode:null,position:""},{merge:!0})}catch(n){console.log("ERROR: ",n)}else sessionStorage.setItem("USERDISPLAYNAME",a.displayName),sessionStorage.setItem("USEREMAIL",a.email),sessionStorage.setItem("USERMAIN",a.main),sessionStorage.setItem("USERSECONDARY",a.secondary),sessionStorage.setItem("USERSWITCHCODE",a.switchCode),sessionStorage.setItem("USERTAGNAME",a.tagName),sessionStorage.setItem("USERUID",a.uid),sessionStorage.setItem("RNKPOINTS",a.rnkPoints)}),a}))}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(c.a),s.Mb(m.a),s.Mb(n.b),s.Mb(l.a))},e.\u0275cmp=s.Gb({type:e,selectors:[["app-login"]],decls:32,vars:9,consts:[[1,"example-card"],[1,"tp-container"],[1,"card-avatar","example-header-image","m-5a"],[1,"tac"],[3,"formGroup","ngSubmit"],["appearance","outline",1,"form-group","w-100"],["matInput","","type","email","formControlName","email","placeholder","EMAIL","autocomplete","off","minlength","6",1,"form-control"],["input",""],["appearance","outline","hintLabel","Min 6 characters",1,"form-group","w-100"],["matInput","","type","password","formControlName","password","placeholder","PASSWORD","autocomplete","off",1,"form-control",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],["type","submit","mat-flat-button","","color","primary",1,"w-100","mt-30"],[1,"form-group","mt-40","tac"],[3,"routerLink"],[1,"form-group","mt-3"]],template:function(e,t){1&e&&(s.Sb(0,"mat-card",0),s.Nb(1,"mat-card-header"),s.Sb(2,"mat-card-content"),s.Sb(3,"div",1),s.Nb(4,"div",2),s.Sb(5,"h1",3),s.Cc(6,"LOGIN"),s.Rb(),s.Sb(7,"form",4),s.Zb("ngSubmit",(function(){return t.onLogin()})),s.Sb(8,"mat-form-field",5),s.Sb(9,"mat-label"),s.Cc(10,"Email"),s.Rb(),s.Nb(11,"input",6,7),s.Rb(),s.Sb(13,"mat-form-field",8),s.Sb(14,"mat-label"),s.Cc(15,"Password"),s.Rb(),s.Nb(16,"input",9),s.Sb(17,"button",10),s.Zb("click",(function(){return t.hide=!t.hide})),s.Sb(18,"mat-icon"),s.Cc(19),s.Rb(),s.Rb(),s.Rb(),s.Sb(20,"button",11),s.Cc(21,"Iniciar Sesi\xf3n"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(22,"div",12),s.Sb(23,"p"),s.Cc(24,"Crear una cuenta "),s.Sb(25,"a",13),s.Cc(26," Registrarse"),s.Rb(),s.Rb(),s.Rb(),s.Sb(27,"div",14),s.Sb(28,"p"),s.Cc(29,"Olvidaste tu contrase\xf1a? "),s.Sb(30,"a",13),s.Cc(31," Olvide Contrase\xf1a"),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&e&&(s.Bb(7),s.ic("formGroup",t.loginForm),s.Bb(9),s.ic("type",t.hide?"password":"text"),s.Bb(1),s.Cb("aria-label","Hide password")("aria-pressed",t.hide),s.Bb(2),s.Dc(t.hide?"visibility_off":"visibility"),s.Bb(6),s.ic("routerLink",s.mc(7,h)),s.Bb(5),s.ic("routerLink",s.mc(8,f)))},directives:[b.a,b.c,b.b,r.t,r.o,r.h,u.b,u.e,d.a,r.b,r.n,r.f,r.j,p.a,u.f,g.a,n.c],styles:["@media only screen and (max-width:425px){.example-card[_ngcontent-%COMP%]{max-width:400px;margin:0 auto}.w-100[_ngcontent-%COMP%]{width:100%}.w-95[_ngcontent-%COMP%]{width:95%}.tac[_ngcontent-%COMP%]{text-align:center}.mt-40[_ngcontent-%COMP%]{margin-top:40px}.mt-30[_ngcontent-%COMP%]{margin-top:30px}.example-header-image[_ngcontent-%COMP%]{background-image:url(logo.b62b90286ce0377e31a1.jpg);background-size:cover}.m-5a[_ngcontent-%COMP%]{margin:5px auto}.card-avatar[_ngcontent-%COMP%]{height:200px;width:68%;border-radius:50%;flex-shrink:0;object-fit:cover}}"]}),e})()}];let R=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},imports:[[n.d.forChild(S)],n.d]}),e})();var w=i("d3UM");let C=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},imports:[[a.c,R,r.q,b.d,u.d,d.b,w.b,g.b,p.b]]}),e})()}}]);